# 腾讯云短信服务申请教程

本教程将手把手教您如何申请和配置腾讯云短信服务，包含详细的步骤说明和注意事项。

## 前期准备

### 所需材料
1. **企业用户**
   - 营业执照副本（照片或扫描件）
   - 法人身份证（正反面）
   - 企业对公账户信息

2. **个人用户**
   - 身份证（正反面）
   - 个人银行卡信息

### 预估时间
- 账号注册和实名认证：1-2 小时
- 短信签名审核：2-24 小时
- 短信模板审核：2-24 小时

## 详细步骤

### 第一步：注册腾讯云账号

1. **访问腾讯云官网**
   - 打开浏览器，访问 https://cloud.tencent.com/
   - 点击右上角"免费注册"按钮

2. **选择注册方式**
   - 推荐使用"微信扫码注册"（最快捷）
   - 或选择"邮箱注册"
   - 填写基本信息并验证

3. **完善账号信息**
   - 设置登录密码
   - 绑定手机号码
   - 设置安全问题

### 第二步：完成实名认证

1. **进入账号中心**
   - 登录后点击右上角用户名
   - 选择"账号信息"

2. **选择认证类型**
   - 企业认证：适合公司使用，额度更高
   - 个人认证：适合个人开发者

3. **企业认证流程**
   - 填写企业基本信息
   - 上传营业执照（支持 JPG/PNG，小于 5MB）
   - 填写法人信息
   - 选择认证方式：
     - 微信公众号认证（推荐，最快）
     - 对公打款认证（1-2 工作日）
     - 法人人脸识别（即时）

4. **个人认证流程**
   - 填写真实姓名
   - 输入身份证号
   - 上传身份证正反面照片
   - 进行人脸识别验证

### 第三步：开通短信服务

1. **进入产品页面**
   - 在腾讯云首页搜索栏输入"短信"
   - 点击"短信 SMS"进入产品页

2. **开通服务**
   - 点击"立即选购"或"免费试用"
   - 阅读并同意服务协议
   - 点击"立即开通"

3. **领取免费额度**
   - 新用户通常有 100-1000 条免费额度
   - 在控制台首页查看赠送额度

### 第四步：创建短信应用

1. **进入短信控制台**
   - 地址：https://console.cloud.tencent.com/smsv2
   - 或从控制台搜索"短信"进入

2. **创建应用**
   - 点击左侧菜单"应用管理"
   - 点击"创建应用"按钮
   - 填写应用信息：
     - 应用名称：YesLocker（或您的应用名）
     - 应用简介：台球杆柜管理系统短信服务

3. **记录应用信息**
   - 创建成功后会显示 SDKAppID
   - 复制并保存这个 ID（后续配置需要）

### 第五步：创建 API 密钥

1. **访问访问管理**
   - 地址：https://console.cloud.tencent.com/cam/capi
   - 或从控制台搜索"访问管理"

2. **新建密钥**
   - 点击"新建密钥"按钮
   - 系统会自动生成一对密钥

3. **保存密钥信息**
   - SecretId：类似 AKIDxxxxxxxxxxxxx
   - SecretKey：类似 xxxxxxxxxxxxx
   - ⚠️ **重要提示**：SecretKey 只显示一次，请立即复制保存

### 第六步：申请短信签名

1. **理解签名要求**
   - 签名是短信开头的标识，如【YesLocker】
   - 2-12 个字符，不包含【】
   - 不能是纯数字

2. **进入签名管理**
   - 短信控制台 > 国内短信 > 签名管理
   - 点击"创建签名"

3. **填写签名信息**
   
   **企业签名：**
   - 签名类型：公司
   - 签名用途：自用（他用需要授权书）
   - 签名内容：建议使用公司简称或产品名
   - 证明类型：三证合一
   - 上传营业执照

   **APP签名：**
   - 签名类型：APP
   - 签名内容：APP 名称
   - 证明类型：应用商店截图
   - 上传 APP 商店后台截图

   **网站签名：**
   - 签名类型：网站
   - 签名内容：网站名称
   - 证明类型：域名备案截图
   - 上传 ICP 备案截图

4. **提交审核**
   - 检查信息无误后提交
   - 工作时间通常 2 小时内审核
   - 非工作时间可能需要等到下一工作日

5. **常见拒绝原因**
   - 签名与证明材料不符
   - 签名含有敏感词
   - 证明材料不清晰
   - 签名过于宽泛（如"测试"、"通知"）

### 第七步：创建短信模板

1. **模板规范**
   - 变量用 {1}、{2} 表示
   - 不能包含营销内容
   - 不能包含链接（验证码模板）
   - 语句通顺，无错别字

2. **创建验证码模板**
   - 进入：国内短信 > 正文模板管理
   - 点击"创建正文模板"
   - 填写信息：
     - 模板名称：用户验证码
     - 短信类型：普通短信
     - 短信内容：`您的验证码为：{1}，该验证码{2}分钟内有效，请勿泄露给他人。`
     - 模板说明：用于用户注册、登录时的身份验证

3. **创建通知类模板**
   
   **提醒通知模板：**
   - 模板名称：杆柜使用提醒
   - 短信内容：`尊敬的{1}，您在本店的{2}号杆柜已超过{3}未使用，请及时前往使用或释放杆柜。`
   - 模板说明：提醒用户及时使用杆柜

   **审核通知模板：**
   - 模板名称：申请审核结果
   - 短信内容：`尊敬的{1}，您的杆柜申请已{2}。{3}`
   - 模板说明：通知用户杆柜申请审核结果

4. **提交审核注意事项**
   - 模板说明要详细
   - 变量示例要合理
   - 一次可以提交多个模板

### 第八步：配置和测试

1. **记录所有配置信息**
   ```
   SDKAppID: 1400xxxxxx
   SecretId: AKIDxxxxxxxxxxxxxxxx
   SecretKey: xxxxxxxxxxxxxxxx
   签名内容: YesLocker
   验证码模板ID: 123456
   通知模板ID: 123457
   ```

2. **配置到项目中**
   - 参考 SMS_CONFIGURATION_GUIDE.md 进行配置
   - 先在开发环境测试

3. **测试发送**
   - 使用测试手机号
   - 检查是否收到短信
   - 验证内容格式是否正确

## 费用相关

### 价格说明
- 国内短信：0.045-0.05 元/条
- 无月租费，按量计费
- 阶梯定价，量大优惠

### 充值方式
1. 预付费（推荐）
   - 先充值后使用
   - 支持微信、支付宝
   - 最低充值 10 元

2. 后付费
   - 需要企业认证
   - 月结算
   - 需要一定信用额度

### 设置预警
1. 进入费用中心
2. 设置余额预警（如低于 50 元）
3. 设置日发送量预警

## 常见问题解答

### Q1: 签名审核不通过怎么办？
**A:** 常见原因和解决方案：
- 签名与证明不符 → 确保签名是公司名/产品名/网站名
- 证明材料模糊 → 重新上传清晰图片
- 签名包含敏感词 → 更换签名内容
- 签名太通用 → 使用具体的品牌名

### Q2: 模板审核不通过怎么办？
**A:** 检查以下几点：
- 去掉营销性词汇（如"最"、"第一"）
- 确保变量使用正确（{1}、{2}）
- 语句通顺，无语病
- 用途说明写详细

### Q3: 发送失败怎么处理？
**A:** 排查步骤：
1. 检查配置信息是否正确
2. 确认签名和模板已审核通过
3. 查看账户余额是否充足
4. 检查手机号格式是否正确
5. 查看 API 返回的错误码

### Q4: 如何防止短信轰炸？
**A:** 建议措施：
- 前端限制 60 秒发送间隔
- 后端验证发送频率
- 设置图形验证码
- 限制单号码日发送量
- 监控异常发送行为

## 技术支持

### 官方文档
- 短信产品文档：https://cloud.tencent.com/document/product/382
- API 文档：https://cloud.tencent.com/document/product/382/38766
- 错误码：https://cloud.tencent.com/document/product/382/38768

### 联系支持
- 在线客服：控制台右下角
- 工单系统：https://console.cloud.tencent.com/workorder
- 技术社区：https://cloud.tencent.com/developer

## 最佳实践建议

1. **安全性**
   - 使用子账号权限管理
   - 定期更换密钥
   - 不在代码中硬编码密钥

2. **可靠性**
   - 实现发送失败重试
   - 记录发送日志
   - 监控发送成功率

3. **用户体验**
   - 提供语音验证码备选
   - 清晰的错误提示
   - 合理的重发间隔

4. **成本控制**
   - 设置日发送上限
   - 监控异常发送
   - 定期分析发送数据

## 总结

完成以上步骤后，您的腾讯云短信服务就配置完成了。记住：
- 保管好密钥信息
- 遵守短信发送规范
- 合理使用免费额度
- 及时充值避免服务中断

祝您使用愉快！如有问题，请参考官方文档或联系技术支持。