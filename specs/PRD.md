# 杆柜管理小程序PRD

## TL;DR

杆柜管理小程序旨在解决门店杆柜管理混乱、杆具存取难追踪的问题。通过数字化流程，实现杆柜申请、存取、凭证展示和提醒，提升管理效率和用户体验。目标用户包括普通用户（顾客）、门店管理员和总部管理员。门店员工仅作为凭证核查人员，无需系统账号和操作界面。

---

## Goals

### Business Goals

* 提高杆柜使用和管理的透明度，减少杆具丢失和误用。

* 降低人工管理成本，提升门店运营效率。

* 实现总部对各门店杆柜使用情况的实时监控。

* 增强顾客对杆柜管理流程的满意度。

### User Goals

* 顾客可便捷申请和管理个人杆柜，随时查看存取记录。

* 管理员可高效分配、审核和追踪杆柜使用情况。

* 顾客可及时收到杆柜相关提醒，避免遗忘或误操作。

* 所有操作流程数字化，减少纸质和口头沟通。

### Non-Goals

* 不涉及非门店场景的杆具管理（如赛事、外借等）。

* 不支持与第三方硬件（如智能锁）直接集成。

* 不提供财务结算、支付等功能。

---

## User Stories

### 普通用户（顾客）

* 作为一名顾客，我希望能用手机号注册并上传头像，便于身份识别。

* 作为一名顾客，我希望能在线申请杆柜，选择门店和编号，安全存放个人杆具。

* 作为一名顾客，我希望每次存杆和取杆都能快速填写申请，系统自动记录时间。

* 作为一名顾客，我希望能随时查看自己的杆柜使用记录，确保物品安全。

* 作为一名顾客，我希望在杆柜长期未使用时收到提醒，避免遗忘。

* 作为一名顾客，我希望能通过网页端展示我的杆柜凭证，方便前台核查。

### 门店员工

* 门店员工仅作为凭证核查人员，无需登录或操作系统账号。顾客在前台出示电子凭证，门店员工核查后完成物理操作。

### 门店管理员

* 作为门店管理员，我希望能审核顾客的杆柜申请，合理分配资源。

* 作为门店管理员，我希望能创建和管理本门店的杆柜编号。

* 作为门店管理员，我希望能收到长期未使用杆柜的提醒，及时清理。

* 作为门店管理员，我希望能查看和导出本店所有杆柜的使用情况，便于管理。

* 作为门店管理员，我希望能手动调整杆柜分配，处理特殊情况。

### 总部管理员

* 作为总部管理员，我希望能实时查看所有门店的杆柜使用数据，便于决策。

* 作为总部管理员，我希望能设置和调整各门店杆柜管理规则，统一标准。

* 作为总部管理员，我希望能导出全公司杆柜使用报表，支持运营分析。

* 作为总部管理员，我希望能管理所有门店和门店管理员账号。

---

## Functional Requirements

### 用户端功能（Priority: High）

* **注册与登录**：支持手机号注册，短信验证码校验，自动获取手机号。用户注册时需上传头像（支持拍照和相册），填写姓名，绑定门店。

* **杆柜申请**：在线填写申请表，选择门店和杆柜编号，提交后进入审核流程。一个用户只能绑定一个杆柜。

* **存取杆操作**：每次存杆或取杆需填写申请，系统自动记录操作时间（日期+时间），无需备注。存取后提醒用户归还钥匙到吧台。

* **凭证展示**：生成带有用户姓名、手机号、头像、申请时间的电子凭证，用户可在前台展示，无需扫码。

* **提醒与通知**：如杆柜连续三个月无任何记录，自动提醒用户和管理员。支持短信和App推送。

* **历史记录查询**：用户可随时查看个人杆柜申请、存取历史。

### 管理端功能（Priority: High）

* **门店与杆柜管理**：门店管理员可创建门店和杆柜编号，管理杆柜状态（可用/被占用）。

* **申请审核**：门店管理员可查看、审批、驳回杆柜申请，支持批量操作。

* **杆柜分配与调整**：门店管理员可手动分配、回收、调整杆柜归属。

* **数据统计与导出**：支持按门店、时间、用户等维度统计杆柜使用情况，导出Excel报表。

* **异常与提醒管理**：自动标记长期未使用杆柜，管理员收到清理提醒，可处理并记录结果。

* **权限管理**：总部管理员、门店管理员、普通用户多级权限。总部管理员可管理所有门店和管理员账号。

### 其他功能（Priority: Medium）

* **操作日志**：记录所有关键操作，便于追溯和审计。

* **系统设置**：总部可配置杆柜类型、数量、使用规则等参数。

* **账号与门店管理**：用户只能绑定一个门店，如需更换可联系管理员或注销重注册。

---

## User Experience

### Entry Point & First-Time User Experience

* 用户通过网页端（H5）访问，适配手机和桌面浏览器。

* 首次登录需手机号注册，短信验证码校验，自动获取手机号。注册时需上传头像、填写姓名、选择门店。

* 新用户引导页简要介绍杆柜管理流程和主要功能。

### Core Experience

1. **申请杆柜**

  * 用户进入首页，点击“申请杆柜”，选择门店和杆柜编号，填写姓名，上传头像。

  * 提交后显示“申请成功，等待审核”提示。

2. **管理员审核**

  * 门店管理员收到申请通知，进入管理端审核，支持一键通过/驳回，批量操作。

  * 审核结果自动推送给用户。

3. **凭证展示**

  * 用户收到审核通过通知，获得电子凭证，凭证页面展示姓名、手机号、头像、申请时间。

  * 用户可在前台展示凭证，无需扫码，门店员工核查后完成物理操作。

4. **存取杆操作**

  * 用户每次存杆或取杆时，进入“存取杆”页面，系统自动记录操作时间。

  * 操作完成后提醒用户归还钥匙到吧台。

5. **定期提醒**

  * 系统自动检测杆柜连续三个月无记录，自动通过短信和App推送提醒用户和管理员。

6. **历史记录与数据查询**

  * 用户可随时查看个人历史，管理员可导出全店/全公司数据。

### Advanced Features & Edge Cases

* 支持管理员手动调整杆柜归属，处理特殊调岗或离职情况。

* 异常操作（如多次未归还、信息不符）自动上报总部。

* 用户如需更换门店，可联系管理员修改或注销重注册。

### UI/UX Highlights

* 采用企业标准色彩，保证视觉统一和高对比度。

* 响应式布局，适配不同手机和桌面屏幕。

* 关键操作有二次确认，防止误操作。

* 重要信息（如杆柜编号、有效期）突出显示。

* 仅支持中文界面。

---

## Narrative

在某连锁门店，顾客小李每天都需要使用专属杆柜存放个人杆具。以往，杆柜分配和存取全靠纸质登记，常常出现杆具丢失、责任不清等问题。自从门店上线了杆柜管理网页应用，小李只需在手机上提交申请，管理员审核通过后即可获得专属杆柜和电子凭证。每次存取杆具时，小李只需在网页端填写操作，所有记录自动保存。系统还会在杆柜长期未使用时自动提醒，避免遗忘。门店员工在前台仅需核查凭证，无需登录系统。管理员也能实时查看所有杆柜的使用情况，发现异常及时处理。总部则通过后台数据，全面掌握各门店杆柜使用效率，优化资源配置。通过这套系统，门店管理更加高效透明，顾客体验显著提升，企业运营风险大幅降低。

---

## Success Metrics

### User-Centric Metrics

* 日活跃用户数（DAU）、月活跃用户数（MAU）

* 用户申请杆柜的转化率

* 用户满意度调查分数

* 用户平均操作时长（流程是否顺畅）

### Business Metrics

* 杆柜丢失/异常率下降幅度

* 管理员处理工时减少比例

* 总部数据报表使用频率

* 门店杆柜利用率提升

### Technical Metrics

* 应用稳定性（Crash率低于0.1%）

* 关键操作平均响应时间（<1秒）

* 消息推送到达率（>98%）

### Tracking Plan

* 用户注册/登录事件

* 杆柜申请/审批/分配事件

* 存取杆操作事件

* 异常/到期提醒推送事件

* 数据导出/报表查看事件

---

## Technical Implementation

### 前端

* **技术框架**：uni-app（H5模式），统一代码适配手机和桌面浏览器，便于后续迁移到小程序等多端。

* **部署平台**：Vercel，支持自动CI/CD，全球加速，便于团队协作和快速上线。

* **界面语言**：仅支持中文界面。

* **用户端与管理端**：均为网页端，分别适配手机和桌面，管理端支持多级权限。

### 管理端

* **技术框架**：同样采用uni-app，保证风格一致和代码复用。

* **适配性**：支持桌面和手机端访问，便于管理员随时管理。

* **部署平台**：Vercel，统一部署和维护。

### 后端API

* **初期方案**：可用Vercel Serverless Functions或Supabase Edge Functions，快速实现RESTful API，支持用户、杆柜、操作记录等数据模型。

* **后续扩展**：如需复杂业务逻辑、定时任务或高并发支持，可自建Node.js后端，部署在云主机（如腾讯云CVM、阿里云ECS等）。

* **API接口**：RESTful风格，预留小程序/多端对接能力，便于未来扩展。

### 数据库

* **平台**：Supabase（基于PostgreSQL），结构化数据存储，支持事务、强一致性。

* **自动备份**：Supabase自带自动备份功能，定期检查备份策略，确保数据安全。

* **权限管理**：灵活的行级权限控制，保障数据隔离和安全。

### 图片存储

* **平台**：Supabase Storage，专用于头像等图片管理，支持上传、访问权限控制，便于与用户数据集成。

### 短信服务

* **平台**：腾讯云短信，国内送达率高，API文档完善。

* **集成方式**：需自建API服务，将Supabase事件与腾讯云短信API对接，实现注册、提醒等短信通知。

### 备份

* **数据库备份**：Supabase自动备份，建议定期检查备份策略，确保数据可恢复。

* **图片存储备份**：Supabase Storage支持数据导出，建议定期备份重要图片数据。

### 安全

* **认证与权限**：Supabase自带认证和权限管理，支持手机号注册、短信验证码校验，基础防刷措施（如验证码频率限制）。

* **数据安全**：所有用户数据、操作记录均存储于Supabase，权限分级，防止越权访问。

* **仅中文界面**：所有界面和交互仅支持中文，简化本地化和合规风险。

### 其他

* **API接口**：所有核心功能均通过RESTful API实现，便于未来对接微信小程序、原生App等多端。

* **扩展性**：整体架构支持用户量增长和功能扩展，便于后续增加新业务模块。

---

## Milestones & Sequencing

### Project Estimate

* Medium: 2–4周

### Team Size & Composition

* 小团队：2–3人

  * 1名产品/项目负责人

  * 1名前端开发（兼UI设计）

  * 1名后端开发

### Suggested Phases

**需求梳理与原型设计（1周）**

* 负责人：产品/项目负责人

* 交付物：需求文档、交互原型

* 依赖：与总部/门店沟通需求

**核心功能开发（1.5周）**

* 负责人：前端、后端开发

* 交付物：注册登录、杆柜申请、审批、存取杆、凭证、提醒等核心功能

* 依赖：API设计、数据库结构

**测试与优化（0.5周）**

* 负责人：全员

* 交付物：功能测试、Bug修复、性能优化

* 依赖：测试用例、用户反馈

**上线与培训（0.5周）**

* 负责人：产品/项目负责人

* 交付物：网页端上线、用户培训材料

* 依赖：总部/门店配合

---