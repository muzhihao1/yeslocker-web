# YesLocker Railway éƒ¨ç½²æ‰§è¡ŒæŒ‡å—

**å½“å‰çŠ¶æ€**: æ‰€æœ‰ä»£ç å’Œè„šæœ¬å·²å‡†å¤‡å°±ç»ªï¼Œå¼€å§‹å®é™…éƒ¨ç½²æµç¨‹

## ğŸ”¥ ç«‹å³æ‰§è¡Œæ­¥éª¤

### Step 1: Railway ç™»å½•
```bash
# åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œï¼ˆéœ€è¦æµè§ˆå™¨äº¤äº’ï¼‰
railway login
```
- ä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨è¿›è¡ŒOAuthç™»å½•
- ä½¿ç”¨æ‚¨çš„GitHubè´¦å·ç™»å½•Railway
- ç™»å½•å®Œæˆåç»ˆç«¯ä¼šæ˜¾ç¤ºæˆåŠŸä¿¡æ¯

### Step 2: éªŒè¯ç™»å½•çŠ¶æ€
```bash
railway whoami
```
åº”è¯¥çœ‹åˆ°æ‚¨çš„ç”¨æˆ·åï¼Œè¡¨ç¤ºç™»å½•æˆåŠŸã€‚

### Step 3: æ‰§è¡Œé¡¹ç›®åˆå§‹åŒ–
```bash
# è¿è¡Œæˆ‘ä»¬å‡†å¤‡å¥½çš„åˆå§‹åŒ–è„šæœ¬
./tools/deployment/railway-setup-v2.sh
```

**è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨ï¼š**
- åˆå§‹åŒ–Railwayé¡¹ç›®
- åˆ›å»ºrailway.tomlé…ç½®
- è®¾ç½®åŸºæœ¬ç¯å¢ƒå˜é‡

### Step 4: æ‰‹åŠ¨æ·»åŠ PostgreSQLæ•°æ®åº“
1. æ‰“å¼€ https://railway.app/dashboard
2. é€‰æ‹©åˆšåˆ›å»ºçš„é¡¹ç›®
3. ç‚¹å‡» "New Service" â†’ "Database" â†’ "PostgreSQL"
4. ç­‰å¾…æ•°æ®åº“åˆå§‹åŒ–ï¼ˆçº¦1-2åˆ†é’Ÿï¼‰

### Step 5: é…ç½®ç¯å¢ƒå˜é‡
```bash
# è¿è¡Œç¯å¢ƒé…ç½®è„šæœ¬
./tools/deployment/railway-env-config-v2.sh
```

### Step 6: åˆå§‹åŒ–ç”Ÿäº§æ•°æ®åº“
```bash
# è¿è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
railway run node server/database/init-pg.js
```

### Step 7: éƒ¨ç½²åº”ç”¨
```bash
# éƒ¨ç½²åˆ°Railway
railway up
```

### Step 8: éªŒè¯éƒ¨ç½²
```bash
# è¿è¡Œè‡ªåŠ¨éªŒè¯è„šæœ¬
./tools/deployment/railway-deploy-verify.sh
```

## ğŸ“‹ æ‰§è¡Œæ£€æŸ¥æ¸…å•

åœ¨æ¯ä¸ªæ­¥éª¤åæ£€æŸ¥ï¼š

- [ ] **Step 1 å®Œæˆ**: `railway whoami` æ˜¾ç¤ºç”¨æˆ·å
- [ ] **Step 3 å®Œæˆ**: Railway Dashboardæ˜¾ç¤ºæ–°é¡¹ç›®
- [ ] **Step 4 å®Œæˆ**: é¡¹ç›®ä¸­æœ‰PostgreSQLæœåŠ¡
- [ ] **Step 5 å®Œæˆ**: ç¯å¢ƒå˜é‡å·²è®¾ç½®ï¼ˆ`railway variables`ï¼‰
- [ ] **Step 6 å®Œæˆ**: æ•°æ®åº“è¡¨å·²åˆ›å»ºå¹¶æœ‰ç§å­æ•°æ®
- [ ] **Step 7 å®Œæˆ**: åº”ç”¨æˆåŠŸéƒ¨ç½²ï¼Œæœ‰å¯è®¿é—®çš„URL
- [ ] **Step 8 å®Œæˆ**: æ‰€æœ‰éªŒè¯æµ‹è¯•é€šè¿‡

## ğŸš¨ å¦‚æœé‡åˆ°é—®é¢˜

### å¸¸è§é—®é¢˜è§£å†³ï¼š

**é—®é¢˜1: ç™»å½•å¤±è´¥**
```bash
# æ¸…é™¤æœ¬åœ°è®¤è¯å¹¶é‡æ–°ç™»å½•
railway logout
railway login
```

**é—®é¢˜2: é¡¹ç›®åˆ›å»ºå¤±è´¥**
- æ£€æŸ¥Railwayè´¦å·æ˜¯å¦æœ‰åˆ›å»ºé¡¹ç›®æƒé™
- ç¡®ä¿é¡¹ç›®åç§°å”¯ä¸€

**é—®é¢˜3: æ•°æ®åº“è¿æ¥å¤±è´¥**
- ç¡®è®¤PostgreSQLæ’ä»¶å·²æ·»åŠ å¹¶æ˜¾ç¤ºä¸º"Active"
- æ£€æŸ¥DATABASE_URLç¯å¢ƒå˜é‡ï¼š`railway variables | grep DATABASE_URL`

**é—®é¢˜4: éƒ¨ç½²å¤±è´¥**
```bash
# æ£€æŸ¥éƒ¨ç½²æ—¥å¿—
railway logs

# æ£€æŸ¥æœ¬åœ°æ„å»º
npm run build
cd server && npm install
```

**é—®é¢˜5: éªŒè¯æµ‹è¯•å¤±è´¥**
```bash
# æ‰‹åŠ¨æ£€æŸ¥å…³é”®ç«¯ç‚¹
curl https://your-app.railway.app/health
curl https://your-app.railway.app/stores-lockers
```

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœæ‰§è¡Œè¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·ï¼š

1. è®°å½•å…·ä½“çš„é”™è¯¯ä¿¡æ¯
2. è®°å½•æ‰§è¡Œåˆ°å“ªä¸ªæ­¥éª¤å¤±è´¥
3. è¿è¡Œ `railway logs` æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
4. æ£€æŸ¥Railway Dashboardä¸­çš„æœåŠ¡çŠ¶æ€

## ğŸ¯ æœŸæœ›ç»“æœ

æ‰§è¡Œå®Œæˆåï¼Œæ‚¨åº”è¯¥æœ‰ï¼š

âœ… ä¸€ä¸ªè¿è¡Œåœ¨Railwayä¸Šçš„YesLockeråº”ç”¨  
âœ… å¯è®¿é—®çš„å‰ç«¯ç•Œé¢ï¼ˆç”¨æˆ·ç«¯ï¼‰  
âœ… æ­£å¸¸å·¥ä½œçš„APIç«¯ç‚¹  
âœ… è¿æ¥çš„PostgreSQLæ•°æ®åº“  
âœ… å®Œæ•´çš„æµ‹è¯•æ•°æ®  

**é¢„è®¡æ€»æ‰§è¡Œæ—¶é—´**: 15-20åˆ†é’Ÿ

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿä»Step 1å¼€å§‹ï¼** ğŸš€