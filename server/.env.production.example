# YesLocker API服务器生产环境配置模板
# 复制此文件为 .env.production 并修改相应的值

# ========================================
# 基础配置
# ========================================
NODE_ENV=production
PORT=3001
HOST=0.0.0.0

# ========================================
# CORS配置
# ========================================
# 允许的来源（多个域名用逗号分隔）
CORS_ORIGIN=https://www.yeslocker.com,https://admin.yeslocker.com
CORS_CREDENTIALS=true

# ========================================
# 安全配置
# ========================================
# JWT密钥（请使用强密码，建议32位以上随机字符串）
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# JWT过期时间
JWT_ACCESS_TOKEN_EXPIRES=24h
JWT_REFRESH_TOKEN_EXPIRES=7d

# API密钥（用于服务间通信）
API_SECRET_KEY=your-api-secret-key-change-this

# ========================================
# 数据存储配置
# ========================================
# 数据文件路径
DATA_FILE_PATH=/var/www/yeslocker/server/data/production.json

# 自动保存间隔（毫秒）
AUTO_SAVE_INTERVAL=30000

# 备份配置
ENABLE_AUTO_BACKUP=true
BACKUP_DIR=/var/backups/yeslocker
BACKUP_RETENTION_DAYS=7

# ========================================
# 日志配置
# ========================================
# 日志级别: error, warn, info, debug
LOG_LEVEL=info

# 日志文件路径
LOG_DIR=/var/log/yeslocker
LOG_FILE=/var/log/yeslocker/app.log
ERROR_LOG_FILE=/var/log/yeslocker/error.log

# 日志格式: json, simple
LOG_FORMAT=json

# ========================================
# 限流配置
# ========================================
# 请求限制（每个IP每分钟的请求数）
RATE_LIMIT_WINDOW=60000
RATE_LIMIT_MAX_REQUESTS=100

# 登录尝试限制
LOGIN_ATTEMPTS_WINDOW=900000  # 15分钟
MAX_LOGIN_ATTEMPTS=5

# ========================================
# 短信服务配置（腾讯云SMS）
# ========================================
TENCENT_SECRET_ID=your-tencent-secret-id
TENCENT_SECRET_KEY=your-tencent-secret-key
TENCENT_SMS_APP_ID=your-sms-app-id
TENCENT_SMS_SIGN_NAME=YesLocker
TENCENT_SMS_TEMPLATE_ID=your-template-id

# 短信验证码配置
SMS_CODE_LENGTH=6
SMS_CODE_EXPIRES=300  # 5分钟
SMS_CODE_RESEND_INTERVAL=60  # 1分钟

# ========================================
# 邮件服务配置（可选）
# ========================================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=noreply@yeslocker.com
SMTP_PASS=your-email-password
SMTP_FROM="YesLocker <noreply@yeslocker.com>"

# ========================================
# 监控配置
# ========================================
# 启用性能监控
ENABLE_MONITORING=true

# 健康检查端点
HEALTH_CHECK_PATH=/health

# Metrics端点（Prometheus格式）
METRICS_PATH=/metrics
METRICS_AUTH_TOKEN=your-metrics-auth-token

# ========================================
# 其他配置
# ========================================
# 时区
TZ=Asia/Shanghai

# 最大请求体大小
MAX_REQUEST_SIZE=10mb

# 文件上传限制
MAX_FILE_SIZE=5mb
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf

# 会话配置
SESSION_SECRET=your-session-secret-change-this
SESSION_MAX_AGE=86400000  # 24小时

# 是否启用HTTPS（反向代理后设置为true）
TRUST_PROXY=true

# 是否启用请求日志
ENABLE_REQUEST_LOGGING=true

# 是否启用错误详情（生产环境建议false）
SHOW_ERROR_DETAILS=false